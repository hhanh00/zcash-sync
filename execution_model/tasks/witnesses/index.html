<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.91.2">
<meta name=description content>
<link rel=icon href=/zcash-sync/images/favicon.png type=image/png>
<title>Witnesses :: Zcash Warp Sync</title>
<link href=/zcash-sync/css/nucleus.css?1664892695 rel=stylesheet>
<link href=/zcash-sync/css/fontawesome-all.min.css?1664892695 rel=stylesheet>
<link href=/zcash-sync/css/hybrid.css?1664892695 rel=stylesheet>
<link href=/zcash-sync/css/featherlight.min.css?1664892695 rel=stylesheet>
<link href=/zcash-sync/css/perfect-scrollbar.min.css?1664892695 rel=stylesheet>
<link href=/zcash-sync/css/auto-complete.css?1664892695 rel=stylesheet>
<link href=/zcash-sync/css/atom-one-dark-reasonable.css?1664892695 rel=stylesheet>
<link href=/zcash-sync/css/theme.css?1664892695 rel=stylesheet>
<link href=/zcash-sync/css/tabs.css?1664892695 rel=stylesheet>
<link href=/zcash-sync/css/hugo-theme.css?1664892695 rel=stylesheet>
<link href=/zcash-sync/css/theme-blue.css?1664892695 rel=stylesheet>
<link href=/zcash-sync/common.css?1664892695 rel=stylesheet>
<script src=/zcash-sync/js/jquery-3.3.1.min.js?1664892695></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}</style>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity=sha384-ZPe7yZ91iWxYumsBEOn7ieg8q/o+qh/hQpSaPow8T6BwALcXSCS6C6fSRPIAnTQs crossorigin=anonymous>
</head>
<body data-url=/zcash-sync/execution_model/tasks/witnesses/>
<nav id=sidebar class=showVisitedLinks>
<div id=header-wrapper>
<div id=header>
<a id=logo href=https://hhanh00.github.io/zcash-sync/>
<img srcset="https://hhanh00.github.io/zcash-sync//logo.png 4x">
</a>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script type=text/javascript src=/zcash-sync/js/lunr.min.js?1664892695></script>
<script type=text/javascript src=/zcash-sync/js/auto-complete.js?1664892695></script>
<script type=text/javascript>var baseurl="https://hhanh00.github.io/zcash-sync/"</script>
<script type=text/javascript src=/zcash-sync/js/search.js?1664892695></script>
</div>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/zcash-sync/light_wallet/ title="Light Wallets" class=dd-item>
<a href=/zcash-sync/light_wallet/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#wallet"/></svg>
Light Wallets
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/zcash-sync/light_wallet/purpose/ title=Purpose class=dd-item>
<a href=/zcash-sync/light_wallet/purpose/>
Purpose
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/light_wallet/privacy/ title=Privacy class=dd-item>
<a href=/zcash-sync/light_wallet/privacy/>
Privacy
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/light_wallet/utxo/ title="UTXO Model" class=dd-item>
<a href=/zcash-sync/light_wallet/utxo/>
UTXO Model
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/light_wallet/scan/ title="Scan / Sync" class=dd-item>
<a href=/zcash-sync/light_wallet/scan/>
Scan / Sync
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/light_wallet/reorg/ title=Reorganization class=dd-item>
<a href=/zcash-sync/light_wallet/reorg/>
Reorganization
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/zcash-sync/data_model/ title="Data Model" class=dd-item>
<a href=/zcash-sync/data_model/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#db"/></svg>
Data Model
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/zcash-sync/data_model/tables/ title=Tables class=dd-item>
<a href=/zcash-sync/data_model/tables/>
Tables
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/data_model/chunks/ title="Block Chunks" class=dd-item>
<a href=/zcash-sync/data_model/chunks/>
Block Chunks
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/data_model/rollback/ title=Rollback class=dd-item>
<a href=/zcash-sync/data_model/rollback/>
Rollback
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/zcash-sync/execution_model/ title="Execution Model" class="dd-item
parent">
<a href=/zcash-sync/execution_model/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#work"/></svg>
Execution Model
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/zcash-sync/execution_model/tasks/ title=Tasks class="dd-item
parent">
<a href=/zcash-sync/execution_model/tasks/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#task"/></svg>
Tasks
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/zcash-sync/execution_model/tasks/download/ title=Download class=dd-item>
<a href=/zcash-sync/execution_model/tasks/download/>
Download
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/execution_model/tasks/decrypt/ title=Decrypt class=dd-item>
<a href=/zcash-sync/execution_model/tasks/decrypt/>
Decrypt
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/execution_model/tasks/witnesses/ title=Witnesses class="dd-item active">
<a href=/zcash-sync/execution_model/tasks/witnesses/>
Witnesses
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/zcash-sync/execution_model/pipeline/ title=Pipeline class=dd-item>
<a href=/zcash-sync/execution_model/pipeline/>
Pipeline
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/execution_model/agents/ title=Agents class=dd-item>
<a href=/zcash-sync/execution_model/agents/>
Agents
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/zcash-sync/api/ title=Interface class=dd-item>
<a href=/zcash-sync/api/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#api"/></svg>
Interface
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/example/ title=Example class=dd-item>
<a href=/zcash-sync/example/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#demo"/></svg>
Example
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
<section id=prefooter>
<hr>
<ul>
<li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li>
</ul>
</section>
<section id=footer>
<p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p>
</section>
</div>
</nav>
<section id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div>
<div id=top-bar>
<div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>
<a href=/zcash-sync/>WarpSync</a> > <a href=/zcash-sync/execution_model/>Execution Model</a> > <a href=/zcash-sync/execution_model/tasks/>Tasks</a> > Witnesses
</span>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li><a href=#note-commitments>Note Commitments</a></li>
<li><a href=#note-commitment-tree>Note Commitment Tree</a></li>
<li><a href=#merkle-tree>Merkle Tree</a></li>
<li><a href=#pedersen-hash>Pedersen Hash</a></li>
<li><a href=#merkle-path>Merkle Path</a></li>
<li><a href=#spend-statement-zkp>Spend Statement ZKP</a></li>
</ul>
</nav>
</div>
</div>
</div>
</div>
<div id=head-tags>
</div>
<div id=body-inner>
<h1>
Witnesses
</h1>
<h2 id=note-commitments>Note Commitments</h2>
<p>When someone makes a transactions and therefore creates output notes, they
are encrypted. Even when they are spent, notes are not revealed because
that would also give the transaction that created them.</p>
<p>In fact, we could imagine a scheme where the notes are not stored
in the blockchain but only the zk proofs. Of course, it implies that
clients have another way to retrieve the encrypted output if they
don&rsquo;t store it themselves.</p>
<p>In any case, the point is that when a transaction output, or note
is created we cannot blindly trust that it does not double spend
or just has a value that exceeds the inputs.</p>
<p>In a public blockchain, full nodes can verify every transaction
and ensure that they are well-formed. But if the transaction is
encrypted, it is impossible to check them.</p>
<p>Thanks for zero knowledge proofs, we have now the technology to
create cryptographic proofs that the outputs follow the protocol
rules without knowing precisely their value.</p>
<p>But the ZKP is not enough. When we want to spend one of our note,
we must also show that what we spend is indeed a previously
unspent output.</p>
<p>The usual tool for that is the <em>cryptographic commitment</em>.</p>
<p>Whenever you want to show that you know something but you don&rsquo;t want
to reveal it <em>at the moment</em>, you can use a commitment.</p>
<p>A commitment scheme works in two phases.</p>
<ul>
<li>You &ldquo;commit&rdquo; to your value by calculating a &ldquo;commitment value&rdquo;. You
<em>publish</em> this value for everyone to see.</li>
<li>When you want to show that you have the value, you reveal it
and people can check that the commitment value matches the published commitment.</li>
</ul>
<p>For it to work, the commitment value must be:</p>
<ul>
<li>binding: You must reveal the right value. If you reveal something else, the
commitment value will <em>not</em> match.</li>
<li>hiding: The commitment value is public but it must not give any information
that could reveal the source value.</li>
</ul>
<div class="notices note"><p>In Zcash, the note commitments ensure that when the notes are
used, they refer to outputs of previous transactions.</p>
</div>
<p>Output notes are encrypted but their commitments are public.</p>
<h2 id=note-commitment-tree>Note Commitment Tree</h2>
<p>Note commitments are put in the Blockchain and the order
in which they appear defines the order in which they added to a binary
tree of height 63. This tree is called the Note Commitment Tree.
Every zcash node agrees on the same commitment tree since it only
contains public information.</p>
<p>This tree has millions of leaves. They are never removed or modified.
Therefore the tree keeps growing and is not prunable at the moment.</p>
<p>If you receive a note from a transaction, the note is yours and
you have the note that matches the commitment. However, only a
small fraction of all the note commitments are yours. The rest
belong to other users.</p>
<p>When you want to spend a note, you must prove that it was a previous
transaction output. The way you prove that is by showing that the note
commitment is in the tree.</p>
<p>Now, showing that your note is in the tree without telling which note it
is, is difficult.</p>
<p>It requires some cryptographic tools.</p>
<h2 id=merkle-tree>Merkle Tree</h2>
<h2 id=pedersen-hash>Pedersen Hash</h2>
<h2 id=merkle-path>Merkle Path</h2>
<h2 id=spend-statement-zkp>Spend Statement ZKP</h2>
<footer class=footline>
</footer>
</div>
</div>
<div id=navigation>
<a class="nav nav-prev" href=/zcash-sync/execution_model/tasks/decrypt/ title=Decrypt> <i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/zcash-sync/execution_model/pipeline/ title=Pipeline style=margin-right:0><i class="fa fa-chevron-right"></i></a>
</div>
</section>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=/zcash-sync/js/clipboard.min.js?1664892695></script>
<script src=/zcash-sync/js/perfect-scrollbar.min.js?1664892695></script>
<script src=/zcash-sync/js/perfect-scrollbar.jquery.min.js?1664892695></script>
<script src=/zcash-sync/js/jquery.sticky.js?1664892695></script>
<script src=/zcash-sync/js/featherlight.min.js?1664892695></script>
<script src=/zcash-sync/js/highlight.pack.js?1664892695></script>
<script>hljs.initHighlightingOnLoad()</script>
<script src=/zcash-sync/js/modernizr.custom-3.6.0.js?1664892695></script>
<script src=/zcash-sync/js/learn.js?1664892695></script>
<script src=/zcash-sync/js/hugo-learn.js?1664892695></script>
<script src=/zcash-sync/mermaid/mermaid.js?1664892695></script>
<script>mermaid.initialize({startOnLoad:!0})</script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity=sha384-ljao5I1l+8KYFXG7LNEA7DyaFvuvSCmedUf6Y6JI7LJqiu8q5dEivP2nDdFH31V4 crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})'></script>
</body>
</html>