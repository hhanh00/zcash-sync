<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.91.2">
<meta name=description content>
<link rel=icon href=/zcash-sync/images/favicon.png type=image/png>
<title>Scan / Sync :: Zcash Warp Sync</title>
<link href=/zcash-sync/css/nucleus.css?1664445049 rel=stylesheet>
<link href=/zcash-sync/css/fontawesome-all.min.css?1664445049 rel=stylesheet>
<link href=/zcash-sync/css/hybrid.css?1664445049 rel=stylesheet>
<link href=/zcash-sync/css/featherlight.min.css?1664445049 rel=stylesheet>
<link href=/zcash-sync/css/perfect-scrollbar.min.css?1664445049 rel=stylesheet>
<link href=/zcash-sync/css/auto-complete.css?1664445049 rel=stylesheet>
<link href=/zcash-sync/css/atom-one-dark-reasonable.css?1664445049 rel=stylesheet>
<link href=/zcash-sync/css/theme.css?1664445049 rel=stylesheet>
<link href=/zcash-sync/css/tabs.css?1664445049 rel=stylesheet>
<link href=/zcash-sync/css/hugo-theme.css?1664445049 rel=stylesheet>
<link href=/zcash-sync/css/theme-blue.css?1664445049 rel=stylesheet>
<link href=/zcash-sync/common.css?1664445049 rel=stylesheet>
<script src=/zcash-sync/js/jquery-3.3.1.min.js?1664445049></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}</style>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity=sha384-ZPe7yZ91iWxYumsBEOn7ieg8q/o+qh/hQpSaPow8T6BwALcXSCS6C6fSRPIAnTQs crossorigin=anonymous>
</head>
<body data-url=/zcash-sync/light_wallet/scan/>
<nav id=sidebar class=showVisitedLinks>
<div id=header-wrapper>
<div id=header>
<a id=logo href=https://hhanh00.github.io/zcash-sync/>
<img srcset="https://hhanh00.github.io/zcash-sync//logo.png 4x">
</a>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script type=text/javascript src=/zcash-sync/js/lunr.min.js?1664445049></script>
<script type=text/javascript src=/zcash-sync/js/auto-complete.js?1664445049></script>
<script type=text/javascript>var baseurl="https://hhanh00.github.io/zcash-sync/"</script>
<script type=text/javascript src=/zcash-sync/js/search.js?1664445049></script>
</div>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/zcash-sync/light_wallet/ title="Light Wallets" class="dd-item
parent">
<a href=/zcash-sync/light_wallet/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#wallet"/></svg>
Light Wallets
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/zcash-sync/light_wallet/purpose/ title=Purpose class=dd-item>
<a href=/zcash-sync/light_wallet/purpose/>
Purpose
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/light_wallet/privacy/ title=Privacy class=dd-item>
<a href=/zcash-sync/light_wallet/privacy/>
Privacy
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/light_wallet/utxo/ title="UTXO Model" class=dd-item>
<a href=/zcash-sync/light_wallet/utxo/>
UTXO Model
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/light_wallet/scan/ title="Scan / Sync" class="dd-item active">
<a href=/zcash-sync/light_wallet/scan/>
Scan / Sync
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/light_wallet/reorg/ title=Reorganization class=dd-item>
<a href=/zcash-sync/light_wallet/reorg/>
Reorganization
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/zcash-sync/data_model/ title="Data Model" class=dd-item>
<a href=/zcash-sync/data_model/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#db"/></svg>
Data Model
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/zcash-sync/data_model/tables/ title=Tables class=dd-item>
<a href=/zcash-sync/data_model/tables/>
Tables
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/data_model/chunks/ title="Block Chunks" class=dd-item>
<a href=/zcash-sync/data_model/chunks/>
Block Chunks
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/data_model/rollback/ title=Rollback class=dd-item>
<a href=/zcash-sync/data_model/rollback/>
Rollback
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/zcash-sync/execution_model/ title="Execution Model" class=dd-item>
<a href=/zcash-sync/execution_model/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#work"/></svg>
Execution Model
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/zcash-sync/execution_model/tasks/ title=Tasks class=dd-item>
<a href=/zcash-sync/execution_model/tasks/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#task"/></svg>
Tasks
<i class="fas fa-check read-icon"></i>
</a>
<ul>
<li data-nav-id=/zcash-sync/execution_model/tasks/download/ title=Download class=dd-item>
<a href=/zcash-sync/execution_model/tasks/download/>
Download
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/execution_model/tasks/decrypt/ title=Decrypt class=dd-item>
<a href=/zcash-sync/execution_model/tasks/decrypt/>
Decrypt
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/execution_model/tasks/witnesses/ title=Witnesses class=dd-item>
<a href=/zcash-sync/execution_model/tasks/witnesses/>
Witnesses
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/zcash-sync/execution_model/pipeline/ title=Pipeline class=dd-item>
<a href=/zcash-sync/execution_model/pipeline/>
Pipeline
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/execution_model/agents/ title=Agents class=dd-item>
<a href=/zcash-sync/execution_model/agents/>
Agents
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
</li>
<li data-nav-id=/zcash-sync/api/ title=Interface class=dd-item>
<a href=/zcash-sync/api/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#api"/></svg>
Interface
<i class="fas fa-check read-icon"></i>
</a>
</li>
<li data-nav-id=/zcash-sync/example/ title=Example class=dd-item>
<a href=/zcash-sync/example/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#demo"/></svg>
Example
<i class="fas fa-check read-icon"></i>
</a>
</li>
</ul>
<section id=prefooter>
<hr>
<ul>
<li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li>
</ul>
</section>
<section id=footer>
<p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p>
</section>
</div>
</nav>
<section id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div>
<div id=top-bar>
<div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>
<a href=/zcash-sync/>WarpSync</a> > <a href=/zcash-sync/light_wallet/>Light Wallets</a> > Scan / Sync
</span>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li><a href=#zkp-creation-function>ZKP Creation Function</a></li>
<li><a href=#nullifiers>Nullifiers</a></li>
<li><a href=#scan-outputs>Scan Outputs</a></li>
</ul>
</nav>
</div>
</div>
</div>
</div>
<div id=head-tags>
</div>
<div id=body-inner>
<h1>
Scan / Sync
</h1>
<p>Scanning the blockchain can be done in several ways. Ultimately
they all achieve the same goal:</p>
<ul>
<li>Determine which notes you received, ie adding incoming funds,</li>
<li>Cross-out the notes you spent, ie substracting outgoing funds,</li>
<li>And finally, allowing you to spend your UTXO.</li>
</ul>
<p>The first two bullet points are typical of any UTXO based cryptocurrency wallet,
but the last bullet point may be unusual.</p>
<div class="notices note"><p>Once the blockchain scan finishes, your wallet is said to be synchronized.</p>
</div>
<p>In most cryptocurrencies, as long as you have the secret key and
a reference to the UTXO, you can spend it.</p>
<p>This is not the case of Zcash.</p>
<p>To spend a shielded UTXO, your wallet must also keep track of a value
called the &ldquo;witness&rdquo; specific to a given note <em>and</em> block height.
In other words, every note has a witness which is a several hundred byte
long that changes every time we get a new block.</p>
<p>When the wallet wants to spend a note, it needs to compute a &ldquo;proof&rdquo;
of validity called a zero knowledge proof (ZKP). The ZKP ensures that
we have the secret key and the reference to the UTXO without actually
disclosing this information.</p>
<h2 id=zkp-creation-function>ZKP Creation Function</h2>
<p>One of the argument of the ZKP creation function is the witness. Therefore,
if you want to spend a note, the wallet needs to compute its witness
at a given height.</p>
<p>Wallets are not obligated to provide the latest witnesses. But since
the height is public information, if a wallet does not update the witnesses
it would be possible to gain some knowledge by looking at the witness heights
of a transaction.</p>
<div class="notices note"><p>If a wallet does not update the note witnesses, one can check
the height when a note is spent and deduce when it was received.</p>
</div>
<h2 id=nullifiers>Nullifiers</h2>
<p>In Bitcoin, to spend a UTXO, a wallet simply has to refer to it
and attach a digital signature proving it knows the secret key.</p>
<p>In Zcash, UTXO are encrypted. But that&rsquo;s not enough. Spending a
UTXO must also be hidden. If Zcash transactions referred to UTXO
like Bitcoin does, one could know when the UTXO was created.
Therefore even if it would be impossible to know the values and
addresses of the notes, it would be possible to link notes with
transactions.</p>
<p>To avoid this, Zcash transactions do not directly refer to UTXO
but they refer to a nullifier instead.</p>
<p>Nullifiers are unique values associated with a note. Only the
receiver of the note can create the nullifier and it&rsquo;s impossible
to make a nullifier for a note that does not exist. The exact
mechanism used to achieve this is beyond the scope of this document.</p>
<div class="notices note"><p>Each UTXO has a unique nullifier. Nullifiers cannot be faked: Anyone can verify
that a nullifier is associated with a real UTXO.</p>
</div>
<h2 id=scan-outputs>Scan Outputs</h2>
<p>In conclusion, let&rsquo;s review what a scan must do:</p>
<ul>
<li>It must scan each transaction and try to decrypt its outputs.</li>
<li>Successful decryptions generate &ldquo;received notes&rdquo; (fresh UTXO).</li>
<li>For each received note, the wallet can calculate its nullifier.</li>
<li>Spent notes are detected when their nullifier is used in a later transaction.</li>
<li>For each UTXO, the wallet maintains a witness that it should keep updating.</li>
</ul>
<footer class=footline>
</footer>
</div>
</div>
<div id=navigation>
<a class="nav nav-prev" href=/zcash-sync/light_wallet/utxo/ title="UTXO Model"> <i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/zcash-sync/light_wallet/reorg/ title=Reorganization style=margin-right:0><i class="fa fa-chevron-right"></i></a>
</div>
</section>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=/zcash-sync/js/clipboard.min.js?1664445049></script>
<script src=/zcash-sync/js/perfect-scrollbar.min.js?1664445049></script>
<script src=/zcash-sync/js/perfect-scrollbar.jquery.min.js?1664445049></script>
<script src=/zcash-sync/js/jquery.sticky.js?1664445049></script>
<script src=/zcash-sync/js/featherlight.min.js?1664445049></script>
<script src=/zcash-sync/js/highlight.pack.js?1664445049></script>
<script>hljs.initHighlightingOnLoad()</script>
<script src=/zcash-sync/js/modernizr.custom-3.6.0.js?1664445049></script>
<script src=/zcash-sync/js/learn.js?1664445049></script>
<script src=/zcash-sync/js/hugo-learn.js?1664445049></script>
<script src=/zcash-sync/mermaid/mermaid.js?1664445049></script>
<script>mermaid.initialize({startOnLoad:!0})</script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity=sha384-ljao5I1l+8KYFXG7LNEA7DyaFvuvSCmedUf6Y6JI7LJqiu8q5dEivP2nDdFH31V4 crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})'></script>
</body>
</html>