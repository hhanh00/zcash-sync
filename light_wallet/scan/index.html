<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.104.3"><meta name=generator content="Relearn 5.3.3+tip"><meta name=description content><title>Scan / Sync :: Zcash Warp Sync</title><link href=https://hhanh00.github.io/zcash-sync/images/favicon.png?1666246110 rel=icon type=image/png><link href=https://hhanh00.github.io/zcash-sync/css/fontawesome-all.min.css?1666246110 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://hhanh00.github.io/zcash-sync/css/fontawesome-all.min.css?1666246110 rel=stylesheet></noscript><link href=https://hhanh00.github.io/zcash-sync/css/featherlight.min.css?1666246110 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://hhanh00.github.io/zcash-sync/css/featherlight.min.css?1666246110 rel=stylesheet></noscript><link href=https://hhanh00.github.io/zcash-sync/css/auto-complete.css?1666246110 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://hhanh00.github.io/zcash-sync/css/auto-complete.css?1666246110 rel=stylesheet></noscript><link href=https://hhanh00.github.io/zcash-sync/css/perfect-scrollbar.min.css?1666246110 rel=stylesheet><link href=https://hhanh00.github.io/zcash-sync/css/nucleus.css?1666246110 rel=stylesheet><link href=https://hhanh00.github.io/zcash-sync/css/fonts.css?1666246110 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://hhanh00.github.io/zcash-sync/css/fonts.css?1666246110 rel=stylesheet></noscript><link href=https://hhanh00.github.io/zcash-sync/css/theme.css?1666246110 rel=stylesheet><link href=https://hhanh00.github.io/zcash-sync/css/theme-blue.css?1666246110 rel=stylesheet id=variant-style><link href=https://hhanh00.github.io/zcash-sync/css/ie.css?1666246110 rel=stylesheet><link href=https://hhanh00.github.io/zcash-sync/css/variant.css?1666246110 rel=stylesheet><link href=https://hhanh00.github.io/zcash-sync/css/print.css?1666246110 rel=stylesheet media=print><script src=https://hhanh00.github.io/zcash-sync/js/variant.js?1666246110></script>
<script>var index_url="https://hhanh00.github.io/zcash-sync/index.json",baseUriFull,root_url="https://hhanh00.github.io/zcash-sync/",baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",baseUriFull="https://hhanh00.github.io/zcash-sync/",window.variants&&variants.init(["blue"])</script><script src=https://hhanh00.github.io/zcash-sync/js/jquery.min.js?1666246110 defer></script><link rel=stylesheet href=https://hhanh00.github.io/zcash-sync//common.css>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity=sha384-ZPe7yZ91iWxYumsBEOn7ieg8q/o+qh/hQpSaPow8T6BwALcXSCS6C6fSRPIAnTQs crossorigin=anonymous></head><body class="mobile-support default" data-url=https://hhanh00.github.io/zcash-sync/light_wallet/scan/><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div class=navigation><a class="nav nav-next" href=https://hhanh00.github.io/zcash-sync/light_wallet/reorg/ title="Reorganization (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a></div><div class=navigation><a class="nav nav-prev" href=https://hhanh00.github.io/zcash-sync/light_wallet/utxo/ title="UTXO Model (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a></div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span>
<span id=toc-menu title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=https://hhanh00.github.io/zcash-sync/><span itemprop=name>WarpSync</span></a><meta itemprop=position content="1">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=https://hhanh00.github.io/zcash-sync/light_wallet/><span itemprop=name>Light Wallets</span></a><meta itemprop=position content="2">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Scan / Sync</span><meta itemprop=position content="3"></li></ol></div><div class="default-animation progress"><div class=wrapper><nav id=TableOfContents><ul><li><a href=#zkp-creation-function>ZKP Creation Function</a></li><li><a href=#nullifiers>Nullifiers</a></li><li><a href=#scan-outputs>Scan Outputs</a></li></ul></nav></div></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags></div><article class=default><h1>Scan / Sync</h1><p>Scanning the blockchain can be done in several ways. Ultimately
they all achieve the same goal:</p><ul><li>Determine which notes you received, ie adding incoming funds,</li><li>Cross-out the notes you spent, ie substracting outgoing funds,</li><li>And finally, allowing you to spend your UTXO.</li></ul><p>The first two bullet points are typical of any UTXO based cryptocurrency wallet,
but the last bullet point may be unusual.</p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>Once the blockchain scan finishes, your wallet is said to be synchronized.</p></div></div><p>In most cryptocurrencies, as long as you have the secret key and
a reference to the UTXO, you can spend it.</p><p>This is not the case of Zcash.</p><p>To spend a shielded UTXO, your wallet must also keep track of a value
called the &ldquo;witness&rdquo; specific to a given note <em>and</em> block height.
In other words, every note has a witness which is a several hundred byte
long that changes every time we get a new block.</p><p>When the wallet wants to spend a note, it needs to compute a &ldquo;proof&rdquo;
of validity called a zero knowledge proof (ZKP). The ZKP ensures that
we have the secret key and the reference to the UTXO without actually
disclosing this information.</p><h2 id=zkp-creation-function>ZKP Creation Function</h2><p>One of the argument of the ZKP creation function is the witness. Therefore,
if you want to spend a note, the wallet needs to compute its witness
at a given height.</p><p>Wallets are not obligated to provide the latest witnesses. But since
the height is public information, if a wallet does not update the witnesses
it would be possible to gain some knowledge by looking at the witness heights
of a transaction.</p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>If a wallet does not update the note witnesses, one can check
the height when a note is spent and deduce when it was received.</p></div></div><h2 id=nullifiers>Nullifiers</h2><p>In Bitcoin, to spend a UTXO, a wallet simply has to refer to it
and attach a digital signature proving it knows the secret key.</p><p>In Zcash, UTXO are encrypted. But that&rsquo;s not enough. Spending a
UTXO must also be hidden. If Zcash transactions referred to UTXO
like Bitcoin does, one could know when the UTXO was created.
Therefore even if it would be impossible to know the values and
addresses of the notes, it would be possible to link notes with
transactions.</p><p>To avoid this, Zcash transactions do not directly refer to UTXO
but they refer to a nullifier instead.</p><p>Nullifiers are unique values associated with a note. Only the
receiver of the note can create the nullifier and it&rsquo;s impossible
to make a nullifier for a note that does not exist. The exact
mechanism used to achieve this is beyond the scope of this document.</p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>Each UTXO has a unique nullifier. Nullifiers cannot be faked: Anyone can verify
that a nullifier is associated with a real UTXO.</p></div></div><h2 id=scan-outputs>Scan Outputs</h2><p>In conclusion, let&rsquo;s review what a scan must do:</p><ul><li>It must scan each transaction and try to decrypt its outputs.</li><li>Successful decryptions generate &ldquo;received notes&rdquo; (fresh UTXO).</li><li>For each received note, the wallet can calculate its nullifier.</li><li>Spent notes are detected when their nullifier is used in a later transaction.</li><li>For each UTXO, the wallet maintains a witness that it should keep updating.</li></ul><footer class=footline></footer></article></div></main></div><aside id=sidebar class="default-animation showVisitedLinks"><div id=header-wrapper class=default-animation><div id=header class=default-animation><a id=logo href=https://hhanh00.github.io/zcash-sync/><img srcset="https://hhanh00.github.io/zcash-sync//logo.png 4x"></a></div><div class="searchbox default-animation"><label class=a11y-only for=search-by>Search</label>
<i class="fas fa-search"></i>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script>var contentLangs=["en"]</script><script src=https://hhanh00.github.io/zcash-sync/js/auto-complete.js?1666246110 defer></script>
<script src=https://hhanh00.github.io/zcash-sync/js/lunr.min.js?1666246110 defer></script>
<script src=https://hhanh00.github.io/zcash-sync/js/lunr.stemmer.support.min.js?1666246110 defer></script>
<script src=https://hhanh00.github.io/zcash-sync/js/lunr.multi.min.js?1666246110 defer></script>
<script src=https://hhanh00.github.io/zcash-sync/js/lunr.en.min.js?1666246110 defer></script>
<script src=https://hhanh00.github.io/zcash-sync/js/search.js?1666246110 defer></script></div><div id=content-wrapper class=highlightable><ul class=topics><li data-nav-id=/light_wallet/ class="dd-item parent"><a href=https://hhanh00.github.io/zcash-sync/light_wallet/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#wallet"/></svg>Light Wallets<i class="fas fa-check read-icon"></i></a><ul id=subsections-36215d82f105e6a1480b638eaa9c8d85><li data-nav-id=/light_wallet/purpose/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/light_wallet/purpose/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>Purpose<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/light_wallet/privacy/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/light_wallet/privacy/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>Privacy<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/light_wallet/utxo/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/light_wallet/utxo/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>UTXO Model<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/light_wallet/scan/ class="dd-item active"><a href=https://hhanh00.github.io/zcash-sync/light_wallet/scan/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>Scan / Sync<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/light_wallet/reorg/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/light_wallet/reorg/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>Reorganization<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/data_model/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/data_model/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#db"/></svg>Data Model<i class="fas fa-check read-icon"></i></a><ul id=subsections-a50bfc3b4a08a12e2c0e6712a71aa7c5><li data-nav-id=/data_model/tables/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/data_model/tables/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>Tables<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/data_model/chunks/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/data_model/chunks/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>Block Chunks<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/data_model/rollback/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/data_model/rollback/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>Rollback<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/execution_model/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/execution_model/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#work"/></svg>Execution Model<i class="fas fa-check read-icon"></i></a><ul id=subsections-35801c1dd9f796a90a09e9cea0ee9e39><li data-nav-id=/execution_model/tasks/ class="dd-item alwaysopen"><a href=https://hhanh00.github.io/zcash-sync/execution_model/tasks/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#task"/></svg>Tasks<i class="fas fa-check read-icon"></i></a><ul id=subsections-b9a4a25588d5cce3c4a556db5f3a429f><li data-nav-id=/execution_model/tasks/download/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/execution_model/tasks/download/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>Download<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/execution_model/tasks/decrypt/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/execution_model/tasks/decrypt/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>Decrypt<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/execution_model/tasks/witnesses/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/execution_model/tasks/witnesses/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>Witnesses<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/execution_model/tasks/pipeline/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/execution_model/tasks/pipeline/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>Pipeline<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/developer/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/developer/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#api"/></svg>Developer<i class="fas fa-check read-icon"></i></a><ul id=subsections-66449613fb7f90399b05c565e3093d8b><li data-nav-id=/developer/rpc/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/developer/rpc/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>RPC<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/developer/rest/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/developer/rest/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>REST API<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/developer/database/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/developer/database/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>Database<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/developer/ffi/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/developer/ffi/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>FFI<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/developer/java/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/developer/java/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>Java<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/developer/rust/ class=dd-item><a href=https://hhanh00.github.io/zcash-sync/developer/rust/><svg class="icon"><use xlink:href="https://hhanh00.github.io/zcash-sync//sprite.svg#"/></svg>Rust<i class="fas fa-check read-icon"></i></a></li></ul></li></ul><div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"></div><hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVisitedLinks showFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVisitedLinks"><ul><li id=select-language-container class=footerLangSwitch><div class="padding select-container"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-language>Language</label>
<select id=select-language onchange="location=baseUri+this.value"></select></div><div class=select-clear></div></div></li><li id=select-variant-container class=footerVariantSwitch><div class="padding select-container"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-variant>Theme</label>
<select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=blue value=blue selected>Blue</option></select></div><div class=select-clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class="footerVisitedLinks showVisitedLinks"><a class=padding onclick=clearHistory()><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></div><div id=footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=https://hhanh00.github.io/zcash-sync/js/clipboard.min.js?1666246110 defer></script>
<script src=https://hhanh00.github.io/zcash-sync/js/perfect-scrollbar.min.js?1666246110 defer></script>
<script src=https://hhanh00.github.io/zcash-sync/js/featherlight.min.js?1666246110 defer></script>
<script src=https://hhanh00.github.io/zcash-sync/js/theme.js?1666246110 defer></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity=sha384-ljao5I1l+8KYFXG7LNEA7DyaFvuvSCmedUf6Y6JI7LJqiu8q5dEivP2nDdFH31V4 crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})'></script></body></html>